import{H as we,I as se,J as Ie,K as me,d as L,L as te,a as N,M as R,N as E,O as F,P as Me,Q as X,r as B,R as ye,S as be,U as re,V as Ce,W as P,X as Q,Y as Be,Z as Ee,a0 as $e,a1 as Re,a2 as fe,a3 as ne,a4 as Z,a5 as ze,$ as q,o as i,b as v,f as C,w as b,c as w,g as A,h as y,B as J,v as Y,e as u,a6 as Pe,a7 as _,G as ke,a8 as G,a9 as O,t as j,aa as le,y as ae,q as ee,ab as Oe}from"./index-BBevpB28.js";import{u as ie,P as Ne}from"./index-BNDA-iQO.js";import{_ as de}from"./Space-Di21lr3Y.js";import{_ as ce,a as ue}from"./Grid-7lxWgNAk.js";import{p as pe,l as Le,N as Ae}from"./Menu-Bkm80osn.js";function je(l){const{baseColor:r,textColor2:a,bodyColor:d,cardColor:g,dividerColor:c,actionColor:t,scrollbarColor:o,scrollbarColorHover:s,invertedColor:e}=l;return{textColor:a,textColorInverted:"#FFF",color:d,colorEmbedded:t,headerColor:g,headerColorInverted:e,footerColor:t,footerColorInverted:e,headerBorderColor:c,headerBorderColorInverted:e,footerBorderColor:c,footerBorderColorInverted:e,siderBorderColor:c,siderBorderColorInverted:e,siderColor:g,siderColorInverted:e,siderToggleButtonBorder:`1px solid ${c}`,siderToggleButtonColor:r,siderToggleButtonIconColor:a,siderToggleButtonIconColorInverted:a,siderToggleBarColor:me(d,o),siderToggleBarColorHover:me(d,s),__invertScrollbar:"true"}}const ge=we({name:"Layout",common:se,peers:{Scrollbar:Ie},self:je});function Ue(l,r){const a=[];let d=0,g;for(;(g=r.exec(l))!==null&&(g.index>d&&a.push({text:l.slice(d,g.index),isMatch:!1}),a.push({text:g[0],isMatch:!0}),d=r.lastIndex,!!r.global););return d<l.length&&a.push({text:l.slice(d),isMatch:!1}),a}const He={highlightTag:{type:String,default:"mark"},caseSensitive:Boolean,autoEscape:{type:Boolean,default:!0},text:String,patterns:{type:Array,default:()=>[]},highlightClass:String,highlightStyle:[Object,String]},De=L({name:"Highlight",props:He,setup(l){const{mergedClsPrefixRef:r}=te(),a=g=>g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{highlightedNode:N(()=>{const g=r.value;let c=[];const{patterns:t,text:o}=l;if(t.length===0||!o)c=[o];else{const{highlightTag:s,caseSensitive:e,autoEscape:n,highlightClass:h,highlightStyle:k}=l,m=t.map(p=>n?a(p):p).join("|"),S=new RegExp(`(${m})`,e?"g":"gi");c=Ue(o,S).map(({text:p,isMatch:T})=>T?R(s,{class:[`${g}-highlight__mark`,h],style:k},p):p)}return R("span",{class:`${g}-highlight`},c)}),mergedClsPrefix:r}},render(){return this.highlightedNode}}),Fe=E("layout",`
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 flex: auto;
 overflow: hidden;
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
`,[E("layout-scroll-container",`
 overflow-x: hidden;
 box-sizing: border-box;
 height: 100%;
 `),F("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),Ye={embedded:Boolean,position:pe,nativeScrollbar:{type:Boolean,default:!0},scrollbarProps:Object,onScroll:Function,contentClass:String,contentStyle:{type:[String,Object],default:""},hasSider:Boolean,siderPlacement:{type:String,default:"left"}},Se=Me("n-layout");function _e(l){return L({name:l?"LayoutContent":"Layout",props:Object.assign(Object.assign({},X.props),Ye),setup(r){const a=B(null),d=B(null),{mergedClsPrefixRef:g,inlineThemeDisabled:c}=te(r),t=X("Layout","-layout",Fe,ge,r,g);function o(x,p){if(r.nativeScrollbar){const{value:T}=a;T&&(p===void 0?T.scrollTo(x):T.scrollTo(x,p))}else{const{value:T}=d;T&&T.scrollTo(x,p)}}ye(Se,r);let s=0,e=0;const n=x=>{var p;const T=x.target;s=T.scrollLeft,e=T.scrollTop,(p=r.onScroll)===null||p===void 0||p.call(r,x)};be(()=>{if(r.nativeScrollbar){const x=a.value;x&&(x.scrollTop=e,x.scrollLeft=s)}});const h={display:"flex",flexWrap:"nowrap",width:"100%",flexDirection:"row"},k={scrollTo:o},m=N(()=>{const{common:{cubicBezierEaseInOut:x},self:p}=t.value;return{"--n-bezier":x,"--n-color":r.embedded?p.colorEmbedded:p.color,"--n-text-color":p.textColor}}),S=c?re("layout",N(()=>r.embedded?"e":""),m,r):void 0;return Object.assign({mergedClsPrefix:g,scrollableElRef:a,scrollbarInstRef:d,hasSiderStyle:h,mergedTheme:t,handleNativeElScroll:n,cssVars:c?void 0:m,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender},k)},render(){var r;const{mergedClsPrefix:a,hasSider:d}=this;(r=this.onRender)===null||r===void 0||r.call(this);const g=d?this.hasSiderStyle:void 0,c=[this.themeClass,l&&`${a}-layout-content`,`${a}-layout`,`${a}-layout--${this.position}-positioned`];return R("div",{class:c,style:this.cssVars},this.nativeScrollbar?R("div",{ref:"scrollableElRef",class:[`${a}-layout-scroll-container`,this.contentClass],style:[this.contentStyle,g],onScroll:this.handleNativeElScroll},this.$slots):R(Ce,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:this.contentClass,contentStyle:[this.contentStyle,g]}),this.$slots))}})}const ve=_e(!1),We=_e(!0),Ve=E("layout-header",`
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 box-sizing: border-box;
 width: 100%;
 background-color: var(--n-color);
 color: var(--n-text-color);
`,[F("absolute-positioned",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 `),F("bordered",`
 border-bottom: solid 1px var(--n-border-color);
 `)]),qe={position:pe,inverted:Boolean,bordered:{type:Boolean,default:!1}},Je=L({name:"LayoutHeader",props:Object.assign(Object.assign({},X.props),qe),setup(l){const{mergedClsPrefixRef:r,inlineThemeDisabled:a}=te(l),d=X("Layout","-layout-header",Ve,ge,l,r),g=N(()=>{const{common:{cubicBezierEaseInOut:t},self:o}=d.value,s={"--n-bezier":t};return l.inverted?(s["--n-color"]=o.headerColorInverted,s["--n-text-color"]=o.textColorInverted,s["--n-border-color"]=o.headerBorderColorInverted):(s["--n-color"]=o.headerColor,s["--n-text-color"]=o.textColor,s["--n-border-color"]=o.headerBorderColor),s}),c=a?re("layout-header",N(()=>l.inverted?"a":"b"),g,l):void 0;return{mergedClsPrefix:r,cssVars:a?void 0:g,themeClass:c==null?void 0:c.themeClass,onRender:c==null?void 0:c.onRender}},render(){var l;const{mergedClsPrefix:r}=this;return(l=this.onRender)===null||l===void 0||l.call(this),R("div",{class:[`${r}-layout-header`,this.themeClass,this.position&&`${r}-layout-header--${this.position}-positioned`,this.bordered&&`${r}-layout-header--bordered`],style:this.cssVars},this.$slots)}}),Ge=E("layout-sider",`
 flex-shrink: 0;
 box-sizing: border-box;
 position: relative;
 z-index: 1;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 min-width .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 background-color: var(--n-color);
 display: flex;
 justify-content: flex-end;
`,[F("bordered",[P("border",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 width: 1px;
 background-color: var(--n-border-color);
 transition: background-color .3s var(--n-bezier);
 `)]),P("left-placement",[F("bordered",[P("border",`
 right: 0;
 `)])]),F("right-placement",`
 justify-content: flex-start;
 `,[F("bordered",[P("border",`
 left: 0;
 `)]),F("collapsed",[E("layout-toggle-button",[E("base-icon",`
 transform: rotate(180deg);
 `)]),E("layout-toggle-bar",[Q("&:hover",[P("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),P("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])])]),E("layout-toggle-button",`
 left: 0;
 transform: translateX(-50%) translateY(-50%);
 `,[E("base-icon",`
 transform: rotate(0);
 `)]),E("layout-toggle-bar",`
 left: -28px;
 transform: rotate(180deg);
 `,[Q("&:hover",[P("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),P("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})])])]),F("collapsed",[E("layout-toggle-bar",[Q("&:hover",[P("top",{transform:"rotate(-12deg) scale(1.15) translateY(-2px)"}),P("bottom",{transform:"rotate(12deg) scale(1.15) translateY(2px)"})])]),E("layout-toggle-button",[E("base-icon",`
 transform: rotate(0);
 `)])]),E("layout-toggle-button",`
 transition:
 color .3s var(--n-bezier),
 right .3s var(--n-bezier),
 left .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 cursor: pointer;
 width: 24px;
 height: 24px;
 position: absolute;
 top: 50%;
 right: 0;
 border-radius: 50%;
 display: flex;
 align-items: center;
 justify-content: center;
 font-size: 18px;
 color: var(--n-toggle-button-icon-color);
 border: var(--n-toggle-button-border);
 background-color: var(--n-toggle-button-color);
 box-shadow: 0 2px 4px 0px rgba(0, 0, 0, .06);
 transform: translateX(50%) translateY(-50%);
 z-index: 1;
 `,[E("base-icon",`
 transition: transform .3s var(--n-bezier);
 transform: rotate(180deg);
 `)]),E("layout-toggle-bar",`
 cursor: pointer;
 height: 72px;
 width: 32px;
 position: absolute;
 top: calc(50% - 36px);
 right: -28px;
 `,[P("top, bottom",`
 position: absolute;
 width: 4px;
 border-radius: 2px;
 height: 38px;
 left: 14px;
 transition: 
 background-color .3s var(--n-bezier),
 transform .3s var(--n-bezier);
 `),P("bottom",`
 position: absolute;
 top: 34px;
 `),Q("&:hover",[P("top",{transform:"rotate(12deg) scale(1.15) translateY(-2px)"}),P("bottom",{transform:"rotate(-12deg) scale(1.15) translateY(2px)"})]),P("top, bottom",{backgroundColor:"var(--n-toggle-bar-color)"}),Q("&:hover",[P("top, bottom",{backgroundColor:"var(--n-toggle-bar-color-hover)"})])]),P("border",`
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 width: 1px;
 transition: background-color .3s var(--n-bezier);
 `),E("layout-sider-scroll-container",`
 flex-grow: 1;
 flex-shrink: 0;
 box-sizing: border-box;
 height: 100%;
 opacity: 0;
 transition: opacity .3s var(--n-bezier);
 max-width: 100%;
 `),F("show-content",[E("layout-sider-scroll-container",{opacity:1})]),F("absolute-positioned",`
 position: absolute;
 left: 0;
 top: 0;
 bottom: 0;
 `)]),Ke=L({props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:l}=this;return R("div",{onClick:this.onClick,class:`${l}-layout-toggle-bar`},R("div",{class:`${l}-layout-toggle-bar__top`}),R("div",{class:`${l}-layout-toggle-bar__bottom`}))}}),Xe=L({name:"LayoutToggleButton",props:{clsPrefix:{type:String,required:!0},onClick:Function},render(){const{clsPrefix:l}=this;return R("div",{class:`${l}-layout-toggle-button`,onClick:this.onClick},R(Be,{clsPrefix:l},{default:()=>R(Ee,null)}))}}),Qe={position:pe,bordered:Boolean,collapsedWidth:{type:Number,default:48},width:{type:[Number,String],default:272},contentClass:String,contentStyle:{type:[String,Object],default:""},collapseMode:{type:String,default:"transform"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:Boolean,showCollapsedContent:{type:Boolean,default:!0},showTrigger:{type:[Boolean,String],default:!1},nativeScrollbar:{type:Boolean,default:!0},inverted:Boolean,scrollbarProps:Object,triggerClass:String,triggerStyle:[String,Object],collapsedTriggerClass:String,collapsedTriggerStyle:[String,Object],"onUpdate:collapsed":[Function,Array],onUpdateCollapsed:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,onExpand:[Function,Array],onCollapse:[Function,Array],onScroll:Function},Ze=L({name:"LayoutSider",props:Object.assign(Object.assign({},X.props),Qe),setup(l){const r=$e(Se),a=B(null),d=B(null),g=B(l.defaultCollapsed),c=Re(fe(l,"collapsed"),g),t=N(()=>ne(c.value?l.collapsedWidth:l.width)),o=N(()=>l.collapseMode!=="transform"?{}:{minWidth:ne(l.width)}),s=N(()=>r?r.siderPlacement:"left");function e(I,$){if(l.nativeScrollbar){const{value:f}=a;f&&($===void 0?f.scrollTo(I):f.scrollTo(I,$))}else{const{value:f}=d;f&&f.scrollTo(I,$)}}function n(){const{"onUpdate:collapsed":I,onUpdateCollapsed:$,onExpand:f,onCollapse:M}=l,{value:z}=c;$&&Z($,!z),I&&Z(I,!z),g.value=!z,z?f&&Z(f):M&&Z(M)}let h=0,k=0;const m=I=>{var $;const f=I.target;h=f.scrollLeft,k=f.scrollTop,($=l.onScroll)===null||$===void 0||$.call(l,I)};be(()=>{if(l.nativeScrollbar){const I=a.value;I&&(I.scrollTop=k,I.scrollLeft=h)}}),ye(Le,{collapsedRef:c,collapseModeRef:fe(l,"collapseMode")});const{mergedClsPrefixRef:S,inlineThemeDisabled:x}=te(l),p=X("Layout","-layout-sider",Ge,ge,l,S);function T(I){var $,f;I.propertyName==="max-width"&&(c.value?($=l.onAfterLeave)===null||$===void 0||$.call(l):(f=l.onAfterEnter)===null||f===void 0||f.call(l))}const U={scrollTo:e},H=N(()=>{const{common:{cubicBezierEaseInOut:I},self:$}=p.value,{siderToggleButtonColor:f,siderToggleButtonBorder:M,siderToggleBarColor:z,siderToggleBarColorHover:oe}=$,D={"--n-bezier":I,"--n-toggle-button-color":f,"--n-toggle-button-border":M,"--n-toggle-bar-color":z,"--n-toggle-bar-color-hover":oe};return l.inverted?(D["--n-color"]=$.siderColorInverted,D["--n-text-color"]=$.textColorInverted,D["--n-border-color"]=$.siderBorderColorInverted,D["--n-toggle-button-icon-color"]=$.siderToggleButtonIconColorInverted,D.__invertScrollbar=$.__invertScrollbar):(D["--n-color"]=$.siderColor,D["--n-text-color"]=$.textColor,D["--n-border-color"]=$.siderBorderColor,D["--n-toggle-button-icon-color"]=$.siderToggleButtonIconColor),D}),V=x?re("layout-sider",N(()=>l.inverted?"a":"b"),H,l):void 0;return Object.assign({scrollableElRef:a,scrollbarInstRef:d,mergedClsPrefix:S,mergedTheme:p,styleMaxWidth:t,mergedCollapsed:c,scrollContainerStyle:o,siderPlacement:s,handleNativeElScroll:m,handleTransitionend:T,handleTriggerClick:n,inlineThemeDisabled:x,cssVars:H,themeClass:V==null?void 0:V.themeClass,onRender:V==null?void 0:V.onRender},U)},render(){var l;const{mergedClsPrefix:r,mergedCollapsed:a,showTrigger:d}=this;return(l=this.onRender)===null||l===void 0||l.call(this),R("aside",{class:[`${r}-layout-sider`,this.themeClass,`${r}-layout-sider--${this.position}-positioned`,`${r}-layout-sider--${this.siderPlacement}-placement`,this.bordered&&`${r}-layout-sider--bordered`,a&&`${r}-layout-sider--collapsed`,(!a||this.showCollapsedContent)&&`${r}-layout-sider--show-content`],onTransitionend:this.handleTransitionend,style:[this.inlineThemeDisabled?void 0:this.cssVars,{maxWidth:this.styleMaxWidth,width:ne(this.width)}]},this.nativeScrollbar?R("div",{class:[`${r}-layout-sider-scroll-container`,this.contentClass],onScroll:this.handleNativeElScroll,style:[this.scrollContainerStyle,{overflow:"auto"},this.contentStyle],ref:"scrollableElRef"},this.$slots):R(Ce,Object.assign({},this.scrollbarProps,{onScroll:this.onScroll,ref:"scrollbarInstRef",style:this.scrollContainerStyle,contentStyle:this.contentStyle,contentClass:this.contentClass,theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,builtinThemeOverrides:this.inverted&&this.cssVars.__invertScrollbar==="true"?{colorHover:"rgba(255, 255, 255, .4)",color:"rgba(255, 255, 255, .3)"}:void 0}),this.$slots),d?d==="bar"?R(Ke,{clsPrefix:r,class:a?this.collapsedTriggerClass:this.triggerClass,style:a?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):R(Xe,{clsPrefix:r,class:a?this.collapsedTriggerClass:this.triggerClass,style:a?this.collapsedTriggerStyle:this.triggerStyle,onClick:this.handleTriggerClick}):null,this.bordered?R("div",{class:`${r}-layout-sider__border`}):null)}});function et(){const l=$e(ze,null);return N(()=>{if(l===null)return se;const{mergedThemeRef:{value:r},mergedThemeOverridesRef:{value:a}}=l,d=(r==null?void 0:r.common)||se;return a!=null&&a.common?Object.assign({},d,a.common):d})}const tt={class:"modal-footer",style:{display:"flex","justify-content":"flex-end",gap:"8px"}},ot=L({name:"MenuBar",__name:"menu-bar",props:{isEditing:{type:Boolean}},emits:["toggle-edit","export-data"],setup(l,{emit:r}){const a=ie();B(q("page.home.patientInfo")),q("page.home.patientInfo"),q("page.home.dischargeDiagnosis"),q("page.home.medicalTestsAndExaminations"),q("page.home.diseaseCourseAndTreatment"),q("page.home.conditionAtDischarge"),q("page.home.postDischargeMedicationAdvice");const d=r,g=()=>{d("export-data")},c=()=>{d("toggle-edit")},t=()=>{d("toggle-edit")},o=B(!1),s=B(""),e=()=>{o.value=!0};async function n(){o.value=!1;const k=new FormData;k.append("comment",s.value),k.append("save_id",a.processedJson.patientId);try{const{data:m,error:S}=await Ne(k);S||window.$message.success("Submission successful!")}catch{window.$message.error("Submission failed!")}s.value=""}const h=()=>{o.value=!1};return(k,m)=>{const S=de,x=ke;return i(),v(_,null,[C(x,{size:"small",bordered:!1,class:"card-wrapper"},{default:b(()=>[C(S,{cols:12},{default:b(()=>[k.isEditing?(i(),w(y(J),{key:1,type:"primary",onClick:t},{default:b(()=>m[3]||(m[3]=[A("Save")])),_:1})):(i(),w(y(J),{key:0,type:"primary",onClick:c},{default:b(()=>m[2]||(m[2]=[A("Edit")])),_:1})),C(y(J),{type:"primary",onClick:e},{default:b(()=>m[4]||(m[4]=[A("Comment")])),_:1}),C(y(J),{type:"primary",onClick:g},{default:b(()=>m[5]||(m[5]=[A("Export")])),_:1})]),_:1})]),_:1}),C(y(Pe),{show:o.value,"onUpdate:show":m[1]||(m[1]=p=>o.value=p),title:"Comments",preset:"card",style:{"max-width":"600px",width:"90vw"}},{default:b(()=>[C(y(Y),{value:s.value,"onUpdate:value":m[0]||(m[0]=p=>s.value=p),type:"textarea",placeholder:"Please enter your comment",rows:"4"},null,8,["value"])]),footer:b(()=>[u("div",tt,[C(y(J),{type:"primary",onClick:n},{default:b(()=>m[6]||(m[6]=[A("Submit")])),_:1}),C(y(J),{onClick:h},{default:b(()=>m[7]||(m[7]=[A("Cancel")])),_:1})])]),_:1},8,["show"])],64)}}}),nt=G(ot,[["__scopeId","data-v-45535f49"]]),lt={class:"dynamic-table"},st={class:"table-cell"},rt=["colspan"],at=["id","onMouseover","onMouseout","onClick"],it={colspan:6},dt={key:0},ct={key:1},ut=["id","onMouseover","onMouseout","onClick"],pt=L({__name:"BasicInfoTable",props:{data:{},columns:{},isEditing:{type:Boolean},prefix:{}},emits:["highlight","removeHighlight","showSource"],setup(l,{emit:r}){const a=r,d=t=>{a("highlight",t)},g=t=>{a("removeHighlight",t)},c=t=>{a("showSource",t)};return(t,o)=>(i(),v("table",lt,[o[1]||(o[1]=u("colgroup",null,[u("col",{style:{width:"16%"}}),u("col",{style:{width:"18%"}}),u("col",{style:{width:"12%"}}),u("col",{style:{width:"18%"}}),u("col",{style:{width:"15%"}}),u("col",{style:{width:"20%"}})],-1)),u("tbody",null,[(i(!0),v(_,null,O(t.columns,(s,e)=>(i(),v("tr",{key:e},[(i(!0),v(_,null,O(s,n=>(i(),v(_,{key:n.key},[u("td",st,j(n.label),1),u("td",{class:"table-cell",colspan:n.colspan},[t.isEditing?(i(),w(y(Y),{key:0,value:t.data[n.key],"onUpdate:value":h=>t.data[n.key]=h,type:"textarea",autosize:""},null,8,["value","onUpdate:value"])):(i(),v("span",{key:1,id:`${t.prefix||""}-${n.key}`,onMouseover:h=>d(`${t.prefix||""}-${n.key}`),onMouseout:h=>g(`${t.prefix||""}-${n.key}`),onClick:h=>c(`${n.key}`)},j(t.data[n.key]),41,at))],8,rt)],64))),128))]))),128)),o[0]||(o[0]=u("tr",null,[u("td",{class:"table-cell",colspan:6},"Physical Examination:")],-1)),u("tr",null,[u("td",it,[t.isEditing?(i(),v("span",dt,[(i(!0),v(_,null,O(t.data.体检摘要,(s,e)=>(i(),w(y(Y),{key:`体检摘要-${e}`,value:t.data.体检摘要[e],"onUpdate:value":n=>t.data.体检摘要[e]=n,type:"textarea",autosize:""},null,8,["value","onUpdate:value"]))),128))])):(i(),v("span",ct,[(i(!0),v(_,null,O(t.data.体检摘要,(s,e)=>(i(),v("span",{id:`${t.prefix||""}-体检摘要-${e}`,key:`体检摘要-${e}`,style:{"font-weight":"normal"},onMouseover:n=>d(`${t.prefix||""}-体检摘要-${e}`),onMouseout:n=>g(`${t.prefix||""}-体检摘要-${e}`),onClick:n=>c(`体检摘要-${e}`)},j(s),41,ut))),128))]))])])])]))}}),gt=G(pt,[["__scopeId","data-v-56dfe34e"]]),ht={class:"dynamic-table"},mt={class:"table-cell"},ft={class:"table-cell"},vt=["id","onMouseover","onMouseout","onClick"],yt=["id","onMouseover","onMouseout","onClick"],bt=["id","onMouseover","onMouseout","onClick"],Ct={colspan:"8",class:"table-cell"},$t={class:"medical-history"},kt=["id","onMouseover","onMouseout","onClick"],St=L({__name:"BriefHistoryTable",props:{data:{},isEditing:{type:Boolean},prefix:{}},emits:["highlight","removeHighlight","showSource"],setup(l,{emit:r}){const a=[{label:"T:",key:"体温(T)",useful_name:"体温",unit:"℃"},{label:"P:",key:"脉搏(P)",useful_name:"脉搏",unit:"bpm"},{label:"R:",key:"呼吸(R)",useful_name:"呼吸",unit:"bpm"},{label:"BP:",key:["高压(BP高)","低压(BP低)"],useful_name:["高压","低压"],unit:"mmHg"}],d=r,g=o=>{d("highlight",o)},c=o=>{d("removeHighlight",o)},t=o=>{d("showSource",o)};return(o,s)=>(i(),v("table",ht,[s[4]||(s[4]=u("colgroup",null,[u("col",{style:{width:"7%"}}),u("col",{style:{width:"18%"}}),u("col",{style:{width:"7%"}}),u("col",{style:{width:"18%"}}),u("col",{style:{width:"7%"}}),u("col",{style:{width:"13%"}}),u("col",{style:{width:"7%"}}),u("col",{style:{width:"23%"}})],-1)),u("tbody",null,[s[2]||(s[2]=u("tr",null,[u("td",{colspan:"8",class:"table-cell"},"Brief History:")],-1)),u("tr",null,[(i(),v(_,null,O(a,(e,n)=>(i(),v(_,{key:n},[u("td",mt,j(e.label),1),u("td",ft,[o.isEditing?(i(),v(_,{key:0},[Array.isArray(e.key)?(i(),v(_,{key:0},[o.isEditing?(i(),w(y(Y),{key:0,value:o.data[e.key[0]],"onUpdate:value":h=>o.data[e.key[0]]=h,type:"text",size:"small",style:{width:"auto"},autosize:""},null,8,["value","onUpdate:value"])):le("",!0),s[0]||(s[0]=A(" / ")),o.isEditing?(i(),w(y(Y),{key:1,value:o.data[e.key[1]],"onUpdate:value":h=>o.data[e.key[1]]=h,type:"text",size:"small",style:{width:"auto"},autosize:""},null,8,["value","onUpdate:value"])):le("",!0)],64)):(i(),v(_,{key:1},[o.isEditing?(i(),w(y(Y),{key:0,value:o.data[e.key],"onUpdate:value":h=>o.data[e.key]=h,type:"textarea",autosize:"",style:{width:"auto"}},null,8,["value","onUpdate:value"])):le("",!0)],64))],64)):(i(),v(_,{key:1},[Array.isArray(e.key)?(i(),v(_,{key:0},[u("span",{id:`${o.prefix||""}-${e.useful_name[0]}`,style:{"font-weight":"normal"},onMouseover:h=>g(`${o.prefix||""}-${e.useful_name[0]}`),onMouseout:h=>c(`${o.prefix||""}-${e.useful_name[0]}`),onClick:h=>t(`${e.useful_name[0]}`)},j(o.data[e.key[0]]),41,vt),s[1]||(s[1]=A(" / ")),u("span",{id:`${o.prefix||""}-${e.useful_name[1]}`,style:{"font-weight":"normal"},onMouseover:h=>g(`${o.prefix||""}-${e.useful_name[1]}`),onMouseout:h=>c(`${o.prefix||""}-${e.useful_name[1]}`),onClick:h=>t(`${e.useful_name[1]}`)},j(o.data[e.key[1]]),41,yt)],64)):(i(),v("span",{key:1,id:`${o.prefix||""}-${e.useful_name}`,style:{"font-weight":"normal"},onMouseover:h=>g(`${o.prefix||""}-${e.useful_name}`),onMouseout:h=>c(`${o.prefix||""}-${e.useful_name}`),onClick:h=>t(`${e.useful_name}`)},j(o.data[e.key]),41,bt))],64)),A(" "+j(e.unit),1)])],64))),64))]),s[3]||(s[3]=u("tr",null,null,-1)),u("tr",null,[u("td",Ct,[u("div",$t,[o.isEditing?(i(!0),v(_,{key:0},O(o.data.入院时简要病史,(e,n)=>(i(),w(y(Y),{key:`入院时简要病史-${n}`,value:o.data.入院时简要病史[n],"onUpdate:value":h=>o.data.入院时简要病史[n]=h,type:"textarea",autosize:""},null,8,["value","onUpdate:value"]))),128)):(i(!0),v(_,{key:1},O(o.data.入院时简要病史,(e,n)=>(i(),v("span",{id:`${o.prefix||""}-${`入院时简要病史-${n}`}`,key:`入院时简要病史-${n}`,style:{"font-weight":"normal"},onMouseover:h=>g(`${o.prefix||""}-入院时简要病史-${n}`),onMouseout:h=>c(`${o.prefix||""}-入院时简要病史-${n}`),onClick:h=>t(`入院时简要病史-${n}`)},j(e),41,kt))),128))])])])])]))}}),_t=G(St,[["__scopeId","data-v-961cd665"]]),xt={class:"dynamic-table"},Tt={colspan:"8",class:"normal-text table-cell"},wt=["id","onMouseover","onMouseout","onClick"],It=L({__name:"MainTestAndExaminationTable",props:{items:{},highlightedItems:{},isEditing:{type:Boolean},prefix:{}},emits:["highlight","removeHighlight","showSource"],setup(l,{emit:r}){const a=r,d=t=>{a("highlight",t)},g=t=>{a("removeHighlight",t)},c=t=>{a("showSource",t)};return(t,o)=>{const s=Y;return i(),v("table",xt,[o[1]||(o[1]=u("tr",null,[u("td",{colspan:"8",class:"table-cell"},"Main Test And Examination Results")],-1)),u("tr",null,[u("td",Tt,[t.isEditing?(i(!0),v(_,{key:0},O(t.items,(e,n)=>(i(),w(s,{key:`住院期间医疗情况-${n}`,value:t.items[n],"onUpdate:value":h=>t.items[n]=h,type:"textarea",autosize:""},null,8,["value","onUpdate:value"]))),128)):(i(!0),v(_,{key:1},O(t.items,(e,n)=>(i(),v("span",{id:`${t.prefix||""}-住院期间医疗情况-${n}`,key:`住院期间医疗情况-${n}`,style:{"font-weight":"normal"},onMouseover:h=>d(`${t.prefix||""}-住院期间医疗情况-${n}`),onMouseout:h=>g(`${t.prefix||""}-住院期间医疗情况-${n}`),onClick:h=>c(`住院期间医疗情况-${n}`)},[A(j(e)+" ",1),o[0]||(o[0]=u("br",null,null,-1))],40,wt))),128))])])])}}}),Mt=G(It,[["__scopeId","data-v-f3590d66"]]),Bt={class:"dynamic-table"},Et={colspan:"8",class:"normal-text table-cell"},Rt=["id","onMouseover","onMouseout","onClick"],zt={colspan:"8",class:"normal-text table-cell"},Pt=["id","onMouseover","onMouseout","onClick"],Ot={colspan:"8",class:"normal-text table-cell"},Nt=["id","onMouseover","onMouseout","onClick"],Lt=L({__name:"CourseAndTreatmentTable",props:{treatment:{},status:{},advice:{},isEditing:{type:Boolean},prefix:{}},emits:["highlight","removeHighlight","showSource"],setup(l,{emit:r}){const a=r,d=t=>{a("highlight",t)},g=t=>{a("removeHighlight",t)},c=t=>{a("showSource",t)};return(t,o)=>(i(),v("table",Bt,[o[0]||(o[0]=u("tr",null,[u("td",{colspan:"8",class:"table-cell"},"Course And Treatment:")],-1)),u("tr",null,[u("td",Et,[t.isEditing?(i(!0),v(_,{key:0},O(t.treatment,(s,e)=>(i(),w(y(Y),{key:`病程与治疗情况-${e}`,value:t.treatment[e],"onUpdate:value":n=>t.treatment[e]=n,type:"textarea",autosize:""},null,8,["value","onUpdate:value"]))),128)):(i(!0),v(_,{key:1},O(t.treatment,(s,e)=>(i(),v("span",{id:`${t.prefix||""}-病程与治疗情况-${e}`,key:`病程与治疗情况-${e}`,style:{"font-weight":"normal"},onMouseover:n=>d(`${t.prefix||""}-病程与治疗情况-${e}`),onMouseout:n=>g(`${t.prefix||""}-病程与治疗情况-${e}`),onClick:n=>c(`病程与治疗情况-${e}`)},j(s),41,Rt))),128))])]),o[1]||(o[1]=u("tr",null,[u("td",{colspan:"8",class:"table-cell"},"Condition at Discharge:")],-1)),u("tr",null,[u("td",zt,[t.isEditing?(i(!0),v(_,{key:0},O(t.status,(s,e)=>(i(),w(y(Y),{key:`出院时情况-${e}`,value:t.status[e],"onUpdate:value":n=>t.status[e]=n,type:"textarea",autosize:""},null,8,["value","onUpdate:value"]))),128)):(i(!0),v(_,{key:1},O(t.status,(s,e)=>(i(),v("span",{id:`${t.prefix||""}-出院时情况-${e}`,key:`出院时情况-${e}`,style:{"font-weight":"normal"},onMouseover:n=>d(`${t.prefix||""}-出院时情况-${e}`),onMouseout:n=>g(`${t.prefix||""}-出院时情况-${e}`),onClick:n=>c(`出院时情况-${e}`)},j(s),41,Pt))),128))])]),o[2]||(o[2]=u("tr",null,[u("td",{colspan:"8",class:"table-cell"},"Medication Recommendations After Discharge:")],-1)),u("tr",null,[u("td",Ot,[t.isEditing?(i(!0),v(_,{key:0},O(t.advice,(s,e)=>(i(),w(y(Y),{key:`出院后用药建议-${e}`,value:t.advice[e],"onUpdate:value":n=>t.advice[e]=n,type:"textarea",autosize:""},null,8,["value","onUpdate:value"]))),128)):(i(!0),v(_,{key:1},O(t.advice,(s,e)=>(i(),v("span",{id:`${t.prefix||""}-出院后用药建议-${e}`,key:`出院后用药建议-${e}`,style:{"font-weight":"normal"},onMouseover:n=>d(`${t.prefix||""}-出院后用药建议-${e}`),onMouseout:n=>g(`${t.prefix||""}-出院后用药建议-${e}`),onClick:n=>c(`出院后用药建议-${e}`)},j(s),41,Nt))),128))])])]))}}),At=G(Lt,[["__scopeId","data-v-930c81ca"]]),jt=4,Ut=L({__name:"compare-summary",props:{isEditing:{type:Boolean}},setup(l,{expose:r,emit:a}){const d=[[{label:"Name:",key:"姓名",colspan:1},{label:"Age:",key:"年龄",colspan:1},{label:"Gender:",key:"性别",colspan:1}],[{label:"Hospital No:",key:"住院号",colspan:1},{label:"Bed No:",key:"床号",colspan:3}],[{label:"Department:",key:"科室",colspan:5}],[{label:"In Time:",key:"入院时间",colspan:2},{label:"Out Time:",key:"出院时间",colspan:2}],[{label:"Cause:",key:"入院诊断",colspan:5}],[{label:"Diagnosis:",key:"出院诊断",colspan:5}]],g=ae(),c=ie(),t=N(()=>g.isMobile?0:16),o=B(1),s=l,e=f=>{const M=o.value+(f==="prev"?-1:1);o.value=Math.max(1,Math.min(jt,M))},n=B("姓名"),h=a,k=f=>{n.value=f,h("update:clickItem",n.value)},m=f=>ee({basicInfo:{...f.患者基本信息,出院诊断:f.出院诊断},medicalInfo:f.住院期间医疗情况,treatmentCourse:f.病程与治疗情况,dischargeStatus:f.出院时情况,medicationAdvice:f.出院后用药建议,diagnosis:f.出院诊断}),S=ee(c.getProcessedJson()),x=m(S.patient),p=m(S.doctor),T=B([]),U=f=>{const M=S.doctor_pattern[f]||f;document.querySelectorAll(`#${f}`).forEach(z=>z.classList.add("highlight")),document.querySelectorAll(`#${M}`).forEach(z=>z.classList.add("highlight"))},H=f=>{const M=S.doctor_pattern[f]||f;document.querySelectorAll(`#${f}`).forEach(z=>z.classList.remove("highlight")),document.querySelectorAll(`#${M}`).forEach(z=>z.classList.remove("highlight"))},V={padding:"6px var(--n-padding-left)",textAlign:"center",fontWeight:"600",position:"sticky",top:"0",background:"white",zIndex:"10"},I={padding:"6px 6px 6px 6px",position:"sticky",bottom:"-1px",background:"white",zIndex:"10"},$={padding:"0 6px 0 6px",position:"sticky"};return r({patient:x}),(f,M)=>{const z=J,oe=de,D=ke,he=ce,xe=ue;return i(),w(xe,{"x-gap":t.value,"y-gap":0,responsive:"screen","item-responsive":""},{default:b(()=>[(i(!0),v(_,null,O([y(x),y(p)],(K,W)=>(i(),w(he,{key:W,span:"24 s:24 m:12"},{default:b(()=>[C(D,{size:"small",bordered:!1,title:W===0?"LLM Discharge Summary":"Doctor Discharge Summary",class:"summary-card card-wrapper","header-style":V,"footer-style":I,"content-style":$},{footer:b(()=>[C(oe,{justify:"end"},{default:b(()=>[C(z,{size:"small",disabled:o.value===1,onClick:M[0]||(M[0]=Te=>e("prev"))},{default:b(()=>M[2]||(M[2]=[A("<")])),_:1},8,["disabled"]),C(z,{size:"small",disabled:o.value===4,onClick:M[1]||(M[1]=Te=>e("next"))},{default:b(()=>M[3]||(M[3]=[A(">")])),_:1},8,["disabled"])]),_:1})]),default:b(()=>[o.value===1?(i(),w(gt,{key:0,data:K.basicInfo,columns:d,"is-editing":W===0&&s.isEditing,prefix:W===0?"病人":"医生",onHighlight:U,onRemoveHighlight:H,onShowSource:k},null,8,["data","is-editing","prefix"])):o.value===2?(i(),w(_t,{key:1,data:K.basicInfo,"is-editing":W===0&&s.isEditing,prefix:W===0?"病人":"医生",onHighlight:U,onRemoveHighlight:H,onShowSource:k},null,8,["data","is-editing","prefix"])):o.value===3?(i(),w(Mt,{key:2,items:K.medicalInfo,"highlighted-items":T.value,"is-editing":W===0&&s.isEditing,prefix:W===0?"病人":"医生",onHighlight:U,onRemoveHighlight:H,onShowSource:k},null,8,["items","highlighted-items","is-editing","prefix"])):(i(),w(At,{key:3,treatment:K.treatmentCourse,status:K.dischargeStatus,advice:K.medicationAdvice,"is-editing":W===0&&s.isEditing,prefix:W===0?"病人":"医生",onHighlight:U,onRemoveHighlight:H,onShowSource:k},null,8,["treatment","status","advice","is-editing","prefix"]))]),_:2},1032,["title"])]),_:2},1024))),128)),C(he,{span:"24 s:24 m:24"})]),_:1},8,["x-gap"])}}}),Ht=G(Ut,[["__scopeId","data-v-dc158152"]]),Dt=L({name:"SourceTracing",__name:"source-tracing",props:{receivedClickItem:{type:String}},setup(l){const r=l,a=ae(),d=ie(),g=N(()=>a.isMobile?0:16),c=ee(d.processedJson.source),t=ee(d.processedJson.source_pattern),o=B(""),s=B(""),e=B([""]),n=B([]);Oe(()=>r.receivedClickItem,(p,T)=>{p&&(console.log("receivedClickItem changed:",p),h(p))});const h=p=>{let T="";p.includes("-")&&(p=p.split("-"),T=Number.parseInt(p[1]),p=p[0]),o.value=p,T!==""?e.value=t[p][T]:e.value=t[p];const U=[];c&&c[p]&&typeof c[p]=="object"&&Object.entries(c[p]).forEach(([H,V])=>{U.push({label:H,key:H})}),n.value=U,U.length>0?U.some(H=>H.key===s.value)?s.value=s.value:s.value=U[0].key:s.value=""};h("姓名");const k=p=>{s.value=p},m=et(),S=B(!1),x=p=>{if(p.key==="sheep-man")return!0};return(p,T)=>(i(),w(y(ue),{"x-gap":g.value,"y-gap":16,responsive:"screen","item-responsive":""},{default:b(()=>[C(y(ce),{span:"24 s:24 m:24"},{default:b(()=>[C(y(ve),{class:"card-wrapper",style:{height:"calc(30vh)"}},{default:b(()=>[C(y(Je),{class:"text-14px",style:{"text-align":"center","font-weight":"600",padding:"6px",height:"32px"},bordered:""},{default:b(()=>T[0]||(T[0]=[A(" Source Records ")])),_:1}),C(y(ve),{"has-sider":"",position:"absolute",style:{top:"32px"}},{default:b(()=>[C(y(Ze),{bordered:"","native-scrollbar":!1},{default:b(()=>[C(y(Ae),{collapsed:S.value,"collapsed-width":64,"collapsed-icon-size":22,options:n.value,"render-icon":x,value:s.value,size:"small","onUpdate:value":k},null,8,["collapsed","options","value"])]),_:1}),C(y(We),{"content-style":"padding: 12px;","native-scrollbar":!1},{default:b(()=>[C(y(De),{text:c[o.value][s.value],patterns:e.value,class:"white-space","highlight-style":{padding:"0 6px",borderRadius:y(m).borderRadius,display:"inline-block",color:y(m).primaryColor,transition:`all .3s ${y(m).cubicBezierEaseInOut}`,background:"#e8efff"}},null,8,["text","patterns","highlight-style"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["x-gap"]))}}),Ft=G(Dt,[["__scopeId","data-v-508a298f"]]),Gt=L({name:"compareandreview",__name:"index",setup(l){const r=ae(),a=N(()=>r.isMobile?0:16),d=B(!1),g=()=>{d.value=!d.value},c=B(""),t=n=>{c.value=n},o=n=>{if(!n){alert("文件内容为空，无法导出！");return}const h=new Blob([n],{type:"text/plain;charset=utf-8"}),k=URL.createObjectURL(h),m=document.createElement("a");m.href=k,m.download=`export_${Date.now()}.json`,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(k)},s=B(null),e=()=>s.value?(console.log("导出患者数据:",s.value.patient),o(JSON.stringify(s.value.patient,null,2)),s.value.patient):null;return(n,h)=>{const k=ce,m=ue,S=de;return i(),w(S,{vertical:"",size:16},{default:b(()=>[C(m,{"x-gap":a.value,"y-gap":16,responsive:"screen","item-responsive":""},{default:b(()=>[C(k,{span:"24 s:24 m:24"},{default:b(()=>[C(nt,{"is-editing":d.value,onToggleEdit:g,onExportData:e},null,8,["is-editing"])]),_:1})]),_:1},8,["x-gap"]),C(m,{"x-gap":a.value,"y-gap":16,responsive:"screen","item-responsive":""},{default:b(()=>[C(k,{span:"24 s:24 m:24"},{default:b(()=>[C(Ht,{ref_key:"compareSummaryRef",ref:s,"is-editing":d.value,"onUpdate:clickItem":t},null,8,["is-editing"])]),_:1})]),_:1},8,["x-gap"]),C(m,{"x-gap":a.value,"y-gap":16,responsive:"screen","item-responsive":""},{default:b(()=>[C(k,{span:"24 s:24 m:24"},{default:b(()=>[C(Ft,{"received-click-item":c.value},null,8,["received-click-item"])]),_:1})]),_:1},8,["x-gap"])]),_:1})}}});export{Gt as default};
