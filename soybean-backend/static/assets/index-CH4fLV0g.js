import{r as O,a as C,k as W,l as Z,d as k,m as V,o as x,b as $,e as f,$ as o,n as j,p as H,u as z,q as E,c as S,w as r,f as n,h as a,g as N,t as b,s as L,v as F,B,x as X,y as J,z as Q,A as Y,T as ee,C as oe,D as ne,E as R,F as te,G as ae}from"./index-BMk4EKvk.js";import{_ as M,a as U}from"./FormItem-D9EjqjDB.js";import{_ as q}from"./Space-OVdacYiO.js";function se(p){const l=O(0),i=C(()=>Math.ceil(l.value/60)),s=C(()=>l.value>0),{pause:c,resume:h}=W(()=>{l.value>0?l.value-=1:c()},{immediate:!1});function g(v=p){l.value=60*v,h()}function e(){l.value=0,c()}return Z(()=>{c()}),{count:i,isCounting:s,start:g,stop:e}}const le={class:"absolute-lt z-1 size-full overflow-hidden"},re={class:"absolute -right-300px -top-900px lt-sm:-right-100px lt-sm:-top-1170px"},ie={height:"1337",width:"1337"},de={id:"linearGradient-2",x1:"0.79",y1:"0.62",x2:"0.21",y2:"0.86"},ce=["stop-color"],pe=["stop-color"],ue={class:"absolute -bottom-400px -left-200px lt-sm:-bottom-760px lt-sm:-left-100px"},me={height:"896",width:"967.8852157128662"},fe={id:"linearGradient-3",x1:"0.5",y1:"0",x2:"0.5",y2:"1"},ge=["stop-color"],_e=["stop-color"],we=k({name:"WaveBg",__name:"wave-bg",props:{themeColor:{}},setup(p){const _=p,l=C(()=>V(_.themeColor,200)),i=C(()=>V(_.themeColor,500));return(s,c)=>(x(),$("div",le,[f("div",re,[(x(),$("svg",ie,[f("defs",null,[c[0]||(c[0]=f("path",{id:"path-1",opacity:"1","fill-rule":"evenodd",d:"M1337,668.5 C1337,1037.455193874239 1037.455193874239,1337 668.5,1337 C523.6725684305388,1337 337,1236 370.50000000000006,1094 C434.03835568300906,824.6732385973953 6.906089672974592e-14,892.6277623047779 0,668.5000000000001 C0,299.5448061257611 299.5448061257609,1.1368683772161603e-13 668.4999999999999,0 C1037.455193874239,0 1337,299.544806125761 1337,668.5Z"},null,-1)),f("linearGradient",de,[f("stop",{offset:"0","stop-color":l.value,"stop-opacity":"1"},null,8,ce),f("stop",{offset:"1","stop-color":i.value,"stop-opacity":"1"},null,8,pe)])]),c[1]||(c[1]=f("g",{opacity:"1"},[f("use",{"xlink:href":"#path-1",fill:"url(#linearGradient-2)","fill-opacity":"1"})],-1))]))]),f("div",ue,[(x(),$("svg",me,[f("defs",null,[c[2]||(c[2]=f("path",{id:"path-2",opacity:"1","fill-rule":"evenodd",d:"M896,448 C1142.6325445712241,465.5747656464056 695.2579309733121,896 448,896 C200.74206902668806,896 5.684341886080802e-14,695.2579309733121 0,448.0000000000001 C0,200.74206902668806 200.74206902668791,5.684341886080802e-14 447.99999999999994,0 C695.2579309733121,0 475,418 896,448Z"},null,-1)),f("linearGradient",fe,[f("stop",{offset:"0","stop-color":i.value,"stop-opacity":"1"},null,8,ge),f("stop",{offset:"1","stop-color":l.value,"stop-opacity":"1"},null,8,_e)])]),c[3]||(c[3]=f("g",{opacity:"1"},[f("use",{"xlink:href":"#path-2",fill:"url(#linearGradient-3)","fill-opacity":"1"})],-1))]))])]))}}),he=/^[\u4E00-\u9FA5a-zA-Z0-9_-]{4,16}$/,T=/^[1](([3][0-9])|([4][01456789])|([5][012356789])|([6][2567])|([7][0-8])|([8][0-9])|([9][012356789]))[0-9]{8}$/,ve=/^\w{6,18}$/,ye=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,Ce=/^\d{6}$/;function G(){const p={userName:{pattern:he,message:o("form.userName.invalid"),trigger:"change"},phone:{pattern:T,message:o("form.phone.invalid"),trigger:"change"},pwd:{pattern:ve,message:o("form.pwd.invalid"),trigger:"change"},code:{pattern:Ce,message:o("form.code.invalid"),trigger:"change"},email:{pattern:ye,message:o("form.email.invalid"),trigger:"change"}},_={userName:[i(o("form.userName.required")),p.userName],phone:[i(o("form.phone.required")),p.phone],pwd:[i(o("form.pwd.required")),p.pwd],code:[i(o("form.code.required")),p.code],email:[i(o("form.email.required")),p.email]},l=i(o("form.required"));function i(c){return{required:!0,message:c}}function s(c){return[{required:!0,message:o("form.confirmPwd.required")},{asyncValidator:(g,e)=>e.trim()!==""&&e!==j(c)?Promise.reject(g.message):Promise.resolve(),message:o("form.confirmPwd.invalid"),trigger:"input"}]}return{patternRules:p,formRules:_,defaultRequiredRule:l,createRequiredRule:i,createConfirmPwdRule:s}}function I(){const p=O(null);async function _(){var i;await((i=p.value)==null?void 0:i.validate())}async function l(){var i;(i=p.value)==null||i.restoreValidation()}return{formRef:p,validate:_,restoreValidation:l}}const be=k({name:"PwdLogin",__name:"pwd-login",setup(p){const _=H();z();const{formRef:l,validate:i}=I(),s=E({userName:"Soybean",password:"123456"}),c=C(()=>{const{formRules:g}=G();return{userName:g.userName,password:g.pwd}});async function h(){await i(),await _.login(s.userName,s.password)}return C(()=>[{key:"super",label:o("page.login.pwdLogin.superAdmin"),userName:"Super",password:"123456"},{key:"admin",label:o("page.login.pwdLogin.admin"),userName:"Admin",password:"123456"},{key:"user",label:o("page.login.pwdLogin.user"),userName:"User",password:"123456"}]),(g,e)=>{const v=F,m=M,d=B,t=q,w=U;return x(),S(w,{ref_key:"formRef",ref:l,model:s,rules:c.value,size:"large","show-label":!1,onKeyup:L(h,["enter"])},{default:r(()=>[n(m,{path:"userName"},{default:r(()=>[n(v,{value:s.userName,"onUpdate:value":e[0]||(e[0]=u=>s.userName=u),placeholder:a(o)("page.login.common.userNamePlaceholder")},null,8,["value","placeholder"])]),_:1}),n(m,{path:"password"},{default:r(()=>[n(v,{value:s.password,"onUpdate:value":e[1]||(e[1]=u=>s.password=u),type:"password","show-password-on":"click",placeholder:a(o)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(t,{vertical:"",size:24},{default:r(()=>[n(d,{type:"primary",size:"large",round:"",block:"",loading:a(_).loginLoading,onClick:h},{default:r(()=>[N(b(a(o)("common.confirm")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}});function K(){const{loading:p,startLoading:_,endLoading:l}=X(),{count:i,start:s,stop:c,isCounting:h}=se(10),g=C(()=>{let m=o("page.login.codeLogin.getCode");const d=o("page.login.codeLogin.reGetCode",{time:i.value});return p.value&&(m=""),h.value&&(m=d),m});function e(m){var d,t,w,u;return m.trim()===""?((t=(d=window.$message)==null?void 0:d.error)==null||t.call(d,o("form.phone.required")),!1):T.test(m)?!0:((u=(w=window.$message)==null?void 0:w.error)==null||u.call(w,o("form.phone.invalid")),!1)}async function v(m){var t,w;!e(m)||p.value||(_(),await new Promise(u=>{setTimeout(u,500)}),(w=(t=window.$message)==null?void 0:t.success)==null||w.call(t,o("page.login.codeLogin.sendCodeSuccess")),s(),l())}return{label:g,start:s,stop:c,isCounting:h,loading:p,getCaptcha:v}}const xe={class:"w-full flex-y-center gap-16px"},Ne=k({name:"CodeLogin",__name:"code-login",setup(p){const{toggleLoginModule:_}=z(),{formRef:l,validate:i}=I(),{label:s,isCounting:c,loading:h,getCaptcha:g}=K(),e=E({phone:"",code:""}),v=C(()=>{const{formRules:d}=G();return{phone:d.phone,code:d.code}});async function m(){var d;await i(),(d=window.$message)==null||d.success(o("page.login.common.validateSuccess"))}return(d,t)=>{const w=F,u=M,P=B,D=q,A=U;return x(),S(A,{ref_key:"formRef",ref:l,model:e,rules:v.value,size:"large","show-label":!1,onKeyup:L(m,["enter"])},{default:r(()=>[n(u,{path:"phone"},{default:r(()=>[n(w,{value:e.phone,"onUpdate:value":t[0]||(t[0]=y=>e.phone=y),placeholder:a(o)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),n(u,{path:"code"},{default:r(()=>[f("div",xe,[n(w,{value:e.code,"onUpdate:value":t[1]||(t[1]=y=>e.code=y),placeholder:a(o)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),n(P,{size:"large",disabled:a(c),loading:a(h),onClick:t[2]||(t[2]=y=>a(g)(e.phone))},{default:r(()=>[N(b(a(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),n(D,{vertical:"",size:18,class:"w-full"},{default:r(()=>[n(P,{type:"primary",size:"large",round:"",block:"",onClick:m},{default:r(()=>[N(b(a(o)("common.confirm")),1)]),_:1}),n(P,{size:"large",round:"",block:"",onClick:t[3]||(t[3]=y=>a(_)("pwd-login"))},{default:r(()=>[N(b(a(o)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Pe={class:"w-full flex-y-center gap-16px"},ke=k({name:"Register",__name:"register",setup(p){const{toggleLoginModule:_}=z(),{formRef:l,validate:i}=I(),{label:s,isCounting:c,loading:h,getCaptcha:g}=K(),e=E({phone:"",code:"",password:"",confirmPassword:""}),v=C(()=>{const{formRules:d,createConfirmPwdRule:t}=G();return{phone:d.phone,code:d.code,password:d.pwd,confirmPassword:t(e.password)}});async function m(){var d;await i(),(d=window.$message)==null||d.success(o("page.login.common.validateSuccess"))}return(d,t)=>{const w=F,u=M,P=B,D=q,A=U;return x(),S(A,{ref_key:"formRef",ref:l,model:e,rules:v.value,size:"large","show-label":!1,onKeyup:L(m,["enter"])},{default:r(()=>[n(u,{path:"phone"},{default:r(()=>[n(w,{value:e.phone,"onUpdate:value":t[0]||(t[0]=y=>e.phone=y),placeholder:a(o)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),n(u,{path:"code"},{default:r(()=>[f("div",Pe,[n(w,{value:e.code,"onUpdate:value":t[1]||(t[1]=y=>e.code=y),placeholder:a(o)("page.login.common.codePlaceholder")},null,8,["value","placeholder"]),n(P,{size:"large",disabled:a(c),loading:a(h),onClick:t[2]||(t[2]=y=>a(g)(e.phone))},{default:r(()=>[N(b(a(s)),1)]),_:1},8,["disabled","loading"])])]),_:1}),n(u,{path:"password"},{default:r(()=>[n(w,{value:e.password,"onUpdate:value":t[3]||(t[3]=y=>e.password=y),type:"password","show-password-on":"click",placeholder:a(o)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(u,{path:"confirmPassword"},{default:r(()=>[n(w,{value:e.confirmPassword,"onUpdate:value":t[4]||(t[4]=y=>e.confirmPassword=y),type:"password","show-password-on":"click",placeholder:a(o)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(D,{vertical:"",size:18,class:"w-full"},{default:r(()=>[n(P,{type:"primary",size:"large",round:"",block:"",onClick:m},{default:r(()=>[N(b(a(o)("common.confirm")),1)]),_:1}),n(P,{size:"large",round:"",block:"",onClick:t[5]||(t[5]=y=>a(_)("pwd-login"))},{default:r(()=>[N(b(a(o)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),Re=k({name:"ResetPwd",__name:"reset-pwd",setup(p){const{toggleLoginModule:_}=z(),{formRef:l,validate:i}=I(),s=E({phone:"",code:"",password:"",confirmPassword:""}),c=C(()=>{const{formRules:g,createConfirmPwdRule:e}=G();return{phone:g.phone,password:g.pwd,confirmPassword:e(s.password)}});async function h(){var g;await i(),(g=window.$message)==null||g.success(o("page.login.common.validateSuccess"))}return(g,e)=>{const v=F,m=M,d=B,t=q,w=U;return x(),S(w,{ref_key:"formRef",ref:l,model:s,rules:c.value,size:"large","show-label":!1,onKeyup:L(h,["enter"])},{default:r(()=>[n(m,{path:"phone"},{default:r(()=>[n(v,{value:s.phone,"onUpdate:value":e[0]||(e[0]=u=>s.phone=u),placeholder:a(o)("page.login.common.phonePlaceholder")},null,8,["value","placeholder"])]),_:1}),n(m,{path:"code"},{default:r(()=>[n(v,{value:s.code,"onUpdate:value":e[1]||(e[1]=u=>s.code=u),placeholder:a(o)("page.login.common.codePlaceholder")},null,8,["value","placeholder"])]),_:1}),n(m,{path:"password"},{default:r(()=>[n(v,{value:s.password,"onUpdate:value":e[2]||(e[2]=u=>s.password=u),type:"password","show-password-on":"click",placeholder:a(o)("page.login.common.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(m,{path:"confirmPassword"},{default:r(()=>[n(v,{value:s.confirmPassword,"onUpdate:value":e[3]||(e[3]=u=>s.confirmPassword=u),type:"password","show-password-on":"click",placeholder:a(o)("page.login.common.confirmPasswordPlaceholder")},null,8,["value","placeholder"])]),_:1}),n(t,{vertical:"",size:18,class:"w-full"},{default:r(()=>[n(d,{type:"primary",size:"large",round:"",block:"",onClick:h},{default:r(()=>[N(b(a(o)("common.confirm")),1)]),_:1}),n(d,{size:"large",round:"",block:"",onClick:e[4]||(e[4]=u=>a(_)("pwd-login"))},{default:r(()=>[N(b(a(o)("page.login.common.back")),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),$e=k({name:"BindWechat",__name:"bind-wechat",setup(p){return(_,l)=>(x(),$("div"))}}),Se={class:"w-400px lt-sm:w-300px"},ze={class:"flex-y-center justify-between"},Ee={class:"text-28px text-primary font-500 lt-sm:text-22px"},Le={class:"pt-24px"},Fe={class:"text-18px text-primary font-medium"},Be={class:"pt-24px"},Ge=k({name:"login",__name:"index",props:{module:{}},setup(p){const _=p;J();const l=Q(),i={"pwd-login":{label:R["pwd-login"],component:be},"code-login":{label:R["code-login"],component:Ne},register:{label:R.register,component:ke},"reset-pwd":{label:R["reset-pwd"],component:Re},"bind-wechat":{label:R["bind-wechat"],component:$e}},s=C(()=>i[_.module||"pwd-login"]),c=C(()=>l.darkMode?V(l.themeColor,600):l.themeColor),h=C(()=>{const g="#ffffff",e=l.darkMode?.5:.2;return Y(g,l.themeColor,e)});return(g,e)=>{const v=we,m=te,d=ae;return x(),$("div",{class:"relative size-full flex-center overflow-hidden",style:ne({backgroundColor:h.value})},[n(v,{"theme-color":c.value},null,8,["theme-color"]),n(d,{bordered:!1,class:"relative z-4 w-auto rd-12px"},{default:r(()=>[f("div",Se,[f("header",ze,[n(m,{class:"text-64px text-primary lt-sm:text-48px"}),f("h3",Ee,b(a(o)("system.title")),1)]),f("main",Le,[f("h3",Fe,b(a(o)(s.value.label)),1),f("div",Be,[n(ee,{name:a(l).page.animateMode,mode:"out-in",appear:""},{default:r(()=>[(x(),S(oe(s.value.component)))]),_:1},8,["name"])])])])]),_:1})],4)}}});export{Ge as default};
